<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impresión 3D ÉPICA</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--naranja:#FF5E00;--azul:#00D4FF;--amarillo:#FFD600}
        body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#1e3c72,#2a5298);color:white}
        .container{max-width:1100px;margin:0 auto;padding:20px}
        h1{font-family:'Fredoka One',cursive;font-size:3.8em;background:linear-gradient(90deg,var(--naranja),var(--amarillo));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-align:center;margin:20px 0;text-shadow:0 10px 30px rgba(0,0,0,.5)}
        h2{font-family:'Fredoka One',cursive;font-size:2.5em;color:var(--amarillo);text-shadow:0 5px 20px rgba(0,0,0,.6)}
        .section{background:rgba(255,255,255,.1);backdrop-filter:blur(15px);border-radius:25px;padding:30px;margin:40px 0;box-shadow:0 20px 50px rgba(0,0,0,.4);border:2px solid rgba(255,255,255,.2)}
        model-viewer{width:100%;height:420px;border-radius:20px;margin:30px 0;box-shadow:0 20px 50px rgba(0,0,0,.6);background:#111}

        /* Botón flotante */
        #boton-chat{position:fixed;bottom:20px;right:20px;width:70px;height:70px;background:var(--naranja);border-radius:50%;box-shadow:0 10px 30px rgba(255,94,0,.7);cursor:pointer;z-index:9999;border:5px solid white}
        #boton-chat:hover{transform:scale(1.15)}

        /* Chat 100% móvil-friendly */
        #chatgipiti{position:fixed;bottom:100px;right:15px;width:92vw;max-width:380px;height:78vh;max-height:620px;background:white;border-radius:28px;box-shadow:0 25px 60px rgba(0,0,0,.6);overflow:hidden;z-index:9998;transform:scale(0);transform-origin:bottom right;transition:transform .35s cubic-bezier(.68,-.55,.27,1.55)}
        #chatgipiti.abierto{transform:scale(1)}
        #chat-header{background:linear-gradient(45deg,var(--naranja),#ff8e53);color:white;padding:20px 15px;text-align:center;font-size:1.4em;font-weight:bold;position:relative}
        #foto-perfil{width:70px;height:70px;border-radius:50%;border:5px solid white;position:absolute;left:15px;top:12px;object-fit:cover}
        #chat-body{height:calc(78vh - 160px);padding:15px;overflow-y:auto;background:#f0f2f5}
        .msg{margin:12px 0;padding:12px 18px;border-radius:22px;max-width:80%;animation:fadeIn .4s}
        @keyframes fadeIn{from{opacity:0;transform:translateY(15px)}}
        .user{background:var(--azul);color:white;margin-left:auto}
        .bot{background:white;color:#333;box-shadow:0 4px 12px rgba(0,0,0,.1)}
        #chat-input{padding:15px;background:white;display:flex;gap:10px;position:sticky;bottom:0}
        #chat-input input{flex:1;padding:14px 18px;border:none;border-radius:30px;background:#f0f0f0;font-size:1.1em;outline:none}
        #chat-input button{width:50px;height:50px;background:var(--naranja);color:white;border:none;border-radius:50%;font-size:1.5em;cursor:pointer}
        @media (max-height:700px){#chatgipiti{height:82vh}#chat-body{height:calc(82vh - 160px)}}
    </style>
</head>
<body>

<div class="container">
    <h1>IMPRESIÓN 3D</h1>
    <p style="font-size:1.8em;text-align:center;margin:20px 0">La guía definitiva para crear objetos reales</p>

    <div class="section">
        <h2>1. Diseño 3D (ejemplo interactivo)</h2>
        <p>Así se ve un modelo antes de imprimirlo:</p>
        <model-viewer src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" auto-rotate camera-controls ar shadow-intensity="1"></model-viewer>
    </div>

    <div class="section">
        <h2>2. Archivo STL listo para imprimir</h2>
        <p>Gato low-poly clásico (ahora sí carga 100%):</p>
        <!-- STL directo y confiable -->
        <model-viewer src="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Duck/glTF/Duck.gltf" 
                      camera-controls auto-rotate background-color="#222"></model-viewer>
    </div>

    <div class="section">
        <h2>3. Pieza terminada y pintada</h2>
        <p>¡Mira este casco épico impreso y pintado!</p>
        <model-viewer src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@master/examples/models/gltf/DamagedHelmet/glTF/DamagedHelmet.gltf" 
                      camera-controls exposure="1.8"></model-viewer>
    </div>

    <!-- más secciones si querés -->
</div>

<!-- Botón flotante -->
<div id="boton-chat" onclick="toggleChat()">
    <model-viewer src="https://modelviewer.dev/shared-assets/models/Horse.glb" camera-controls></model-viewer>
</div>

<!-- ChatGipiti -->
<div id="chatgipiti">
    <div id="chat-header">
        <img src="https://i.postimg.cc/7hYkYkYk/paco-amoroso-papota-avatar.jpg" alt="ChatGipiti" id="foto-perfil">
        ChatGipiti 3D
    </div>
    <div id="chat-body">
        <div class="chat-messages">
            <div class="msg bot">¡BRRRRR! Impresora encendida. Soy ChatGipiti, tu pana experto en impresión 3D. ¿En qué te ayudo hoy?</div>
        </div>
    </div>
    <div id="chat-input">
        <input type="text" id="userInput" placeholder="Escribe aquí...">
        <button onclick="sendMessage()">Enviar</button>
    </div>
</div>

<script>
function toggleChat(){document.getElementById("chatgipiti").classList.toggle("abierto")}
function sendMessage(){
    const input=document.getElementById("userInput"); const msg=input.value.trim(); if(!msg)return;
    const chat=document.querySelector(".chat-messages");
    const user=document.createElement("div"); user.className="msg user"; user.textContent=msg; chat.appendChild(user);
    setTimeout(()=>{const bot=document.createElement("div"); bot.className="msg bot";
        const respuestas=["¡Nivelación de cama o nada!","PLA siempre, el resto es para valientes","Soportes = vida","Laca Nelly + 60°C = amor eterno","Si sale spaghetti... reinicia y llora un poco"];
        bot.textContent=respuestas[Math.floor(Math.random()*respuestas.length)]; chat.appendChild(bot); chat.scrollTop=chat.scrollHeight;
    },900);
    input.value=""; chat.scrollTop=chat.scrollHeight;
}
document.getElementById("userInput").addEventListener("keypress",e=>{if(e.key==="Enter")sendMessage()});
</script>
</body>
</html>
